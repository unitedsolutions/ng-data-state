{"version":3,"sources":["../../../../../src/data-resource/_constructor/io-initializer/post-syncer/post-syncer.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,CAAC,MAAM,QAAQ,CAAC;AAE5B,MAAM,CAAC,OAAO,WAAU,MAAM;IACvB,IAAA,sCAAe,CAAS;IAE7B,EAAE,CAAA,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACvB,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACxC,CAAC;IAED,IAAI,YAAY,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAEzC,OAAO,eAAe,CAAC,GAAG,CAAC;IAE3B,EAAE,CAAA,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC;QAC5C,eAAe,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;QACjC,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;IAC9B,CAAC;AACH,CAAC","file":"post-syncer.js","sourceRoot":"","sourcesContent":["import * as _ from 'lodash';\n\nexport default function(record) {\n  let {pendingPostData} = this;\n\n  if(!pendingPostData) {\n    this.data.push(record);\n    this.publish();\n    return this.addPublisher.next(record);\n  }\n\n  let recordSansId = _.omit(record, '_id');\n  \n  delete pendingPostData._id;\n  \n  if(_.isEqual(pendingPostData, recordSansId)) {\n    pendingPostData._id = record._id;\n    this.publish();\n    this.pendingPostData = null;\n  }\n}\n"]}