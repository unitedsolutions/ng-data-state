{"version":3,"sources":["../../../../src/data-resource/updaters/updater-generator/updater-generator.ts"],"names":[],"mappings":"AACA,OAAO,YAAY,MAAM,0BAA0B,CAAC;AACpD,OAAO,OAAO,MAAW,qCAAqC,CAAC;AAC/D,OAAO,QAAQ,MAAU,mCAAmC,CAAC;AAE7D,MAAM,CAAC,OAAO,WAAU,MAAM;IAC5B,MAAM,CAAC,UAAS,MAAM;QAAf,iBAON;QANM,IAAA,kBAAI,EAAE,gBAAG,CAAW;QACzB,IAAI,cAAc,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAC9C,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACnC,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC;QACvD,OAAO,CAAC,KAAK,CAAC,cAAM,OAAA,QAAQ,CAAC,IAAI,CAAC,KAAI,EAAE,cAAc,CAAC,EAAnC,CAAmC,CAAC,CAAC;QACzD,MAAM,CAAC,OAAO,CAAC;IACjB,CAAC,CAAA;AACH,CAAC","file":"updater-generator.js","sourceRoot":"","sourcesContent":["import * as _       from 'lodash';\nimport urlProcessor from '../../_lib/url-processor';\nimport updater      from './update-processor/update-processor';\nimport reverter     from './update-reverter/update-reverter';\n\nexport default function(method) {\n  return function(params) {\n    let {data, url} = params;\n    let originalRecord = updater.call(this, data);\n    url = urlProcessor.call(this, url);\n    let promise = this.http[method](url, data).toPromise();\n    promise.catch(() => reverter.call(this, originalRecord));\n    return promise;    \n  }  \n}\n"]}