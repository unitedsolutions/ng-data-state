{"version":3,"sources":["../../../src/data-resource/deleter/delete-processor.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,CAAC,MAAY,QAAQ,CAAC;AAClC,OAAO,YAAY,MAAM,uBAAuB,CAAC;AAEjD,MAAM,CAAC,OAAO,WAAU,MAAM;IAA9B,iBAiBC;IAhBM,IAAA,gBAAG,EAAE,kBAAI,CAAW;IACpB,IAAA,cAAG,CAAS;IACjB,IAAI,KAAK,GAAG,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,EAAC,GAAG,KAAA,EAAC,CAAC,CAAC;IACrC,IAAA,sCAAM,CAA+B;IAC1C,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;IACnC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;IAC3B,IAAI,CAAC,OAAO,EAAE,CAAC;IAEf,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC,SAAS,EAAE,CAAC;IAEhE,OAAO,CAAC,KAAK,CAAC;QACZ,KAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;QACnC,KAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC,CAAC,CAAC;IAEH,MAAM,CAAC,OAAO,CAAC;AACjB,CAAC","file":"delete-processor.js","sourceRoot":"","sourcesContent":["import * as _       from 'lodash';\nimport urlProcessor from '../_lib/url-processor';\n\nexport default function(params) {\n  let {url, data} = params;\n  let {_id} = data;\n  let index = _.findIndex(this.data, {_id});\n  let [record] = this.data.splice(index, 1);\n  url = urlProcessor.call(this, url);\n  this.pendingDeleteId = _id;\n  this.publish();\n\n  let promise = this.http.delete(url, {params: data}).toPromise();\n  \n  promise.catch(() => {\n    this.data.splice(index, 0, record);\n    this.publish();\n  });\n  \n  return promise;\n}\n"]}